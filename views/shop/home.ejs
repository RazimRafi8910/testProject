
<%- include('../partials/header.ejs') %>
    <%- include('../partials/user-navbar.ejs') %>

<style>
  body{
    background-color: #eee;
  }
</style>

<section class="mt- py-5" style="background-image:url('/image/jumbotronImage.jpg'); opacity: 0.9;height: 450px;">
  <div class="container">
    <div class="row">
  
      <div class="mt-5 p-5 text-white rounded">
        <h1>Explore the world of Gadgets</h1>
        <p>Get the products for %50 off</p>
        <a href="/products"class="btn btn-outline-light">Shop Now</a>
      </div>
  
    </div>
  </div>
</section>


 
<section>
<div class="container">

  <header class="mt-5 mb-2">
    <h2 class="ps-1 d-block">New Product</h2>
  </header>
  <div class="row">
    <% newProducts.forEach(function(product){ %>
      <div class="col-lg-3 col-md-6 col-sm-12 d-flex justify-content-center">
          <div class="card my-2 w-100 shadow-2-strong" style="width: 18rem;" >
            <a href="/product/<%= product._id %>/view" class="text-decoration-none text-dark">
              <img src="<%= product.images[0] %>" style="height: 16rem;" class="card-img-top" alt="product image">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title fw-bold"><%= product.productName %></h5>
                <p class="card-text">&#8377 <%= product.price %></p>
                
              </a>
                <div class="d-flex align-items-end pt-1 px-0 pb-0 mt-auto">
                  <button type="button" onclick="addToCart('<%= product._id %>')" class="btn btn-dark shadow-0 me-1">Add to cart</button>
                  <a href="" class="btn btn-light border px-2 pt-2 icon-hover">
                    <i class="fas fa-heart fa-lg text-secondary px-1"></i>
                  </a>
                </div>
                <% if(product.stock==0) {%>
                  <p class="card-text text-danger mx-2 mt-2"><small>Out of stock</small></p>
                  <% } else { %>
                  <p class="card-text mx-2 mt-2"><small>Available <%= product.stock %></small></p>
                  <% } %>
              </div>
          </div>
      </div>
      <% }) %>
    </div>

</div>
</section>

<section style="background-color: #eee;">
<div class="container">

  <header class="my-4">
    <h3 class="d-block">Mobiles</h3>
  </header>
  <div class="row">
    <% products.forEach(function(product){ %>
      <% if( product.category.categoryName==='mobile') {%>
        <div class="col-lg-3 col-md-6 col-sm-12 d-flex justify-content-center">
          <div class="card my-2 w-100 shadow-2-strong" style="width: 18rem;" >
            <a href="/product/<%= product._id %>/view" class="text-decoration-none text-dark">
              <img src="<%= product.images[0] %>" style="height: 16rem;" class="card-img-top" alt="product image">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title fw-bold"><%= product.productName %></h5>
                <p class="card-text">&#8377 <%= product.price %></p>
              </a>
                <div class="d-flex align-items-end pt-1 px-0 pb-0 mt-auto">
                  <button type="button" onclick="addToCart('<%= product._id %>')" class="btn btn-dark shadow-0 me-1">Add to cart</button>
                  <a href="" class="btn btn-light border px-2 pt-2 icon-hover">
                    <i class="fas fa-heart fa-lg text-secondary px-1"></i>
                  </a>
                </div>
                <% if(product.stock==0) {%>
                <p class="card-text text-danger mx-2 mt-2"><small>Out of stock</small></p>
                <% } else { %>
                <p class="card-text mx-2 mt-2"><small>Available <%= product.stock %></small></p>
                <% } %>
              </div>
          </div>
      </div>
      <% } })%>    
    </div>

</div>
</section>

<section class="py-5 mt-5" style="background-color: #f5f5f5;">
    <div class="container">
        <h2 class="mb-5">Why Choose Us</h2>
        <div class="row">
            <div class="col-md-6">
                <h3>Reasonable Prices</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente libero atque laborum nihil.  doloribus cum quis, aliquid vero provident iusto iure?</p>
            </div>
            <div class="col-md-6">
                <h3>Customer Satisfaction</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente libero atque laborum nihil.  doloribus cum quis, aliquid vero provident iusto iure?</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <h3>Best Quality</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente libero atque laborum nihil.  doloribus cum quis, aliquid vero provident iusto iure?</p>
            </div>
            <div class="col-md-6">
                <h3>Happy Customers</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente libero atque laborum nihil.  doloribus cum quis, aliquid vero provident iusto iure?</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <h3>Worldwide Shipping</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente libero atque laborum nihil. Excepturi doloribus cum quis, aliquid vero provident iusto iure?</p>
            </div>
            <div class="col-md-6">
                <h3>Thousand Items</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente libero atque laborum nihil. Excepturi doloribus cum quis, aliquid vero provident iusto iure?</p>
            </div>
        </div>
    </div>
</section>

<section style="background-color: #eee;">
<div class="container">

  <header class="my-4">
    <h3>New product</h3>
  </header>
  
  <div class="row">
    
      <div class="col-lg-3 col-md-6 col-sm-6 d-flex">
          <div class="card w-100 my-2 shadow-2-strong" style="width: 18rem;" >
              <img src="/image/sample-productimage.jpg" style="height: 16rem;" class="card-img-top" alt="product image">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title fw-bold">Product Name</h5>
                <p class="card-text">Rs 199</p>
                <div class="d-flex align-items-end pt-1 px-0 pb-0 mt-auto">
                  <button type="button"  class="btn btn-dark shadow-0 me-1">Add to cart</button>
                  <a href="" class="btn btn-light border px-2 pt-2 icon-hover">
                    <i class="fas fa-heart fa-lg text-secondary px-1"></i>
                  </a>
                </div>
              </div>
          </div>
      </div>

      
    </div>
  
</div>
</section>
<script>

async function addToCart(productId){
  try {
    await fetch(`/cart/${productId}/add`,{
      method:'POST',
      credentials: 'include',
      headers: {
          'Content-Type': 'application/json',
      },
  });
     window.location.reload();
  } catch (error) {
    console.log(error);
  }
}

</script>

   
<%- include('../partials/footer.ejs') %>
